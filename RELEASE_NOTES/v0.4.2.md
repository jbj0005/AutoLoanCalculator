# Auto Loan Calculator v0.4.2 — 2025-09-14

Highlights
- No‑secrets GitHub Pages deploy: build reads `.env.production` (publishable/anon keys) — no GH Secrets required.
- Preflight diagnostics in CI show Supabase key type and length, and prevent `service_role` usage in client builds.
- Safer Supabase setup: index.html provides window fallbacks; production URL corrected.

Details
- Workflow: `.github/workflows/deploy.yml` now supports both committed env and (optionally) GH Secrets.
- CI prints: `segments(dots)=N`, `length(chars)=M`, and “JWT-like” vs “publishable/non-JWT”.
- If the key decodes as JWT with `role=service_role`, the build fails to protect credentials.
- Vite base path auto-computed from repo name when not provided via `VITE_BASE` variable.
- Version pill and `APP_VERSION` set to `V0.4.2`.

Upgrade Notes
- If you previously relied on GH Secrets, you can continue to do so OR switch to `.env.production` (publishable only).
- Ensure `.env.production` uses the full HTTPS Supabase URL.
- Do not commit `service_role` keys.

